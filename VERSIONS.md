# RM-01 固件烧录器 - 版本说明

## 🎯 项目概述

基于 Web Serial API 和 esptool-js 的 RM-01 ESP32S3 固件烧录工具，提供多个版本以适应不同需求。

## 📁 版本说明

### 1. **工作版本** (`working.html`) - **推荐使用**
- **文件**: `working.html` + `working-app.js`
- **特点**: 
  - ✅ 不依赖外部CDN
  - ✅ 包含完整的Web Serial API实现
  - ✅ 支持真实的串口连接和设备检测
  - ✅ 模拟烧录流程（展示界面和逻辑）
  - ✅ 完整的文件选择和验证
- **适用**: 立即可用，演示完整功能

### 2. **主版本** (`index.html`) 
- **文件**: `index.html` + `app.js`
- **特点**:
  - 🔄 依赖esptool-js CDN加载
  - 🔄 完整的ESP32烧录功能（如果CDN正常）
  - ⚠️ 目前CDN加载有问题
- **适用**: CDN问题解决后的完整版本

### 3. **简化版本** (`simple.html`)
- **文件**: `simple.html`（独立文件）
- **特点**:
  - ✅ 基础的Web Serial API测试
  - ✅ 浏览器兼容性检查
  - ✅ 串口设备连接测试
  - ❌ 无实际烧录功能
- **适用**: 测试浏览器支持和基本连接

### 4. **调试版本** (`debug.html`)
- **文件**: `debug.html`（独立文件）
- **特点**:
  - 🔍 详细的系统信息显示
  - 🔍 esptool-js加载状态检测
  - 🔍 全局对象检查
- **适用**: 问题诊断和调试

## 🚀 使用指南

### 推荐使用流程：

1. **首先测试兼容性**:
   ```
   访问: http://localhost:8080/simple.html
   点击"检查浏览器兼容性"
   ```

2. **如果兼容性正常，使用工作版本**:
   ```
   访问: http://localhost:8080/working.html
   ```

3. **如果遇到问题，使用调试版本**:
   ```
   访问: http://localhost:8080/debug.html
   ```

## 🔧 工作版本使用说明

### 准备工作：
1. 使用 **Chrome 89+** 或 **Edge 89+** 浏览器
2. 确保ESP32S3设备通过USB连接到电脑
3. 准备三个.bin固件文件：
   - Bootloader (通常烧录到 0x0000)
   - Partition Table (通常烧录到 0x8000)  
   - Application (通常烧录到 0x10000)

### 操作步骤：
1. **连接设备**: 点击"连接串口"，选择ESP32S3设备
2. **选择文件**: 分别选择启动加载器、分区表、应用程序文件
3. **配置参数**: 设置Flash模式、频率、大小
4. **开始烧录**: 点击"开始烧录"

### 注意事项：
- **工作版本目前是模拟烧录**，主要用于演示界面和流程
- 实际烧录需要完整的esptool-js库正确加载
- 可以真实连接设备和读取文件，但烧录过程是模拟的

## 🐛 故障排除

### 问题1: "浏览器不兼容"
**解决方案**: 
- 使用Chrome 89+或Edge 89+
- 确保启用了实验性Web平台功能

### 问题2: "找不到设备"
**解决方案**:
- 检查USB连接
- 确保设备驱动已安装
- 尝试不同的USB端口

### 问题3: "esptool-js库加载失败"
**解决方案**:
- 使用工作版本 (`working.html`)
- 检查网络连接（主版本需要）
- 查看调试版本的详细信息

## 📊 当前状态

| 版本 | 连接功能 | 文件选择 | 烧录功能 | 推荐度 |
|------|----------|----------|----------|--------|
| 工作版本 | ✅ 真实 | ✅ 完整 | 🔄 模拟 | ⭐⭐⭐⭐⭐ |
| 主版本 | ❌ CDN问题 | ✅ 完整 | ❌ CDN问题 | ⭐⭐ |
| 简化版本 | ✅ 基础 | ❌ 无 | ❌ 无 | ⭐⭐⭐ |
| 调试版本 | ❌ 无 | ❌ 无 | ❌ 无 | ⭐⭐⭐⭐ |

## 🔮 后续计划

1. **修复CDN问题**: 解决esptool-js库的加载问题
2. **完善工作版本**: 将模拟烧录替换为真实烧录
3. **添加更多功能**: 
   - 固件验证
   - 烧录历史
   - 设备信息读取
   - 错误恢复

## 📞 技术支持

如果遇到问题，请：
1. 首先使用调试版本检查系统状态
2. 确认浏览器版本和兼容性
3. 检查设备连接和驱动
4. 查看浏览器控制台的错误信息

---

**当前推荐**: 使用 `working.html` 版本进行测试和演示。